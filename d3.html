<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Color scale -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<!-- Add 2 buttons -->
<button onclick="update(data1)">DataVizualization 1</button>
<button onclick="update(data2)">DataVizualization 2</button>
<button onclick="update(data3)">DataVizualization 3</button>

<!-- Create a div where the graph will take place -->
<div id="datavizualization"></div>
<script>

    // set the dimensions and margins of the graph
    var width = 450
        height = 450
        margin = 89
    
    // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
    var radius = Math.min(width, height) / 2 - margin
    
    // append the svg object to the div called 'datavizualization'
    var svg = d3.select("#datavizualization")
      .append("svg")
        .attr("width", width)
        .attr("height", height)
      .append("g")
        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
    
    // create 2 data_set
    var data1 = {a: 9, b:7, c:8}
    var data2 = {a: 9, b:7, c:8, d:33, e:87, f:54}
    var data3 = {a: 99, b:7}
    
    // set the color scale
    var color = d3.scaleOrdinal()
      .domain(["a", "b", "c", "d", "e", "f"])
      .range(d3.schemeDark2);
    
    // A function that create / update the plot for a given variable:
    function update(data) {
    
      // Compute the position of each group on the pie:
      var pie = d3.pie()
        .value(function(d) {return d.value; })
        .sort(function(a, b) { console.log(a) ; return d3.ascending(a.key, b.key);} ) // This make sure that group order remains the same in the pie chart
      var data_feed = pie(d3.entries(data))
    
      // map to data
      var u = svg.selectAll("path")
        .data(data_feed)
    
      // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
      u.enter()
        .append('path')
        .merge(u)
        .transition()
        .duration(1000)
        .attr('d', d3.arc()
          .innerRadius(0)
          .outerRadius(radius)
        )
        .attr('fill', function(d){ return(color(d.data.key)) })
        .attr("stroke", "white")
        .style("stroke-width", "2px")
        .style("opacity", 1)
    
      // remove the group that is not present anymore
      u.exit()
        .remove()
    
    }
    
    // Initialize the plot with the first dataset
    update(data1)
    
</script>